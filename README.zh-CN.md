# éå®˜æ–¹ TikTok Python API

è¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ TikTok.com çš„éå®˜æ–¹ Python API å°è£…ã€‚ä½¿ç”¨æ­¤ APIï¼Œä½ å¯ä»¥è·å–çƒ­é—¨å†…å®¹ã€æŠ“å–ç‰¹å®šç”¨æˆ·ä¿¡æ¯ç­‰æ›´å¤šæ•°æ®ã€‚

[![DOI](https://zenodo.org/badge/188710490.svg)](https://zenodo.org/badge/latestdoi/188710490) [![LinkedIn](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/davidteather/) [![YouTube](https://img.shields.io/badge/YouTube-FF0000?style=for-the-badge&logo=youtube&logoColor=white)](https://www.youtube.com/c/DavidTeather) [![Discord](https://img.shields.io/discord/736724457258745936?style=for-the-badge&logo=discord&logoColor=white)](https://discord.gg/Xpc6xG4)

æœ¬ API æ—¨åœ¨ä» TikTok ä¸Šâ€œè·å–æ•°æ®â€ã€‚å®ƒä¸èƒ½ç”¨äºä»£è¡¨ç”¨æˆ·åœ¨ TikTok ä¸Šâ€œå‘å¸ƒæˆ–ä¸Šä¼ â€å†…å®¹ã€‚å®ƒä¸æ”¯æŒä»»ä½•éœ€è¦ç”¨æˆ·èº«ä»½éªŒè¯çš„è·¯ç”±ï¼›å¦‚æœä½ æ— æ³•åœ¨â€œæœªç™»å½•çŠ¶æ€â€ä¸‹é€šè¿‡æµè§ˆå™¨å®Œæˆçš„æ“ä½œï¼Œè¿™ä¸ªåº“ä¹Ÿæ— æ³•å®Œæˆã€‚

## èµåŠ©å•†

ä»¥ä¸‹èµåŠ©å•†ä¸ºå±•ç¤ºä½ä»˜è´¹ï¼Œæˆ–ä¸ºæˆ‘ä¸ªäººçš„è”ç›Ÿæ¨å¹¿é“¾æ¥ï¼ˆå¯èƒ½ä¼šè·å¾—ä½£é‡‘ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä¸ä»–ä»¬æ²¡æœ‰ä»»ä½•å…¶ä»–å…³è”ã€‚TikTokAPI åŒ…å°†å§‹ç»ˆä¿æŒå…è´¹ã€å¼€æºã€‚

<div align="center">
    <a href="https://tikapi.io/?ref=davidteather" target="_blank">
        <img src="https://raw.githubusercontent.com/davidteather/TikTok-Api/main/imgs/tikapi.png" width="100" alt="TikApi">
        <div>
            <b>TikAPI</b> æ˜¯ä¸€é¡¹ä»˜è´¹çš„ TikTok API æœåŠ¡ï¼Œæä¾›å¼€ç®±å³ç”¨çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œè®©å¼€å‘æ›´è½»æ¾â€”â€”å·²è¢« 500+ å…¬å¸ä¿¡ä»»ã€‚
        </div>
    </a>
    <br>
    <a href="https://www.ensembledata.com/?utm_source=github&utm_medium=githubpage&utm_campaign=david_thea_github&utm_id=david_thea_github" target="_blank">
        <img src="https://raw.githubusercontent.com/davidteather/TikTok-Api/main/imgs/EnsembleData.png" width="100" alt="Ensemble Data">
        <b></b>
        <div>
         <b>EnsembleData</b> æ˜¯é¢†å…ˆçš„ API æä¾›å•†ï¼Œæ”¯æŒæŠ“å– TikTokã€Instagramã€YouTube ç­‰å¹³å°ã€‚<br> è¢«ä¸»æµçš„ç½‘çº¢è¥é”€ä¸ç¤¾äº¤åª’ä½“ç›‘æµ‹å¹³å°æ‰€ä¿¡ä»»ã€‚
        </div>
    </a>
    <br>
    <a href="https://tikhub.io/?utm_source=github&utm_medium=readme&utm_campaign=tiktok_api&ref=github_davidteather_tiktokapi" target="_blank">
        <img src="https://raw.githubusercontent.com/davidteather/TikTok-Api/main/imgs/tikhub.png" width="100" alt="TikHub API">
        <b></b>
        <div>
         <b>TikHub API</b> æä¾› 700+ ä¸ªç«¯ç‚¹ï¼Œè¦†ç›– 14+ ä¸ªç¤¾äº¤å¹³å°çš„æ•°æ®æŠ“å–ä¸åˆ†æï¼Œ<br>åŒ…æ‹¬è§†é¢‘ã€ç”¨æˆ·ã€è¯„è®ºã€åº—é“ºã€å•†å“ä¸è¶‹åŠ¿ç­‰â€”â€”ä¸€ç«™å¼æå®šã€‚
        </div>
    </a>
    <br>
    <a href="https://www.webshare.io/?referral_code=3x5812idzzzp" target="_blank">
        <img src="https://raw.githubusercontent.com/davidteather/TikTok-Api/main/imgs/webshare.png" width="100" alt="Webshare Proxies">
        <b></b>
        <div>
         <b>é«˜æ€§ä»·æ¯”ã€å¯é çš„ä»£ç†ï¼š</b> ç”¨å¿«é€Ÿç¨³å®šçš„ä»£ç†ä¸ºä½ çš„çˆ¬è™«åŠ é€Ÿã€‚ç«‹å³è¯•ç”¨ 10 ä¸ªå…è´¹æ•°æ®ä¸­å¿ƒä»£ç†ï¼
        </div>
    </a>
</div>

## ç›®å½•

- [æ–‡æ¡£](#documentation)
- [å¿«é€Ÿå¼€å§‹](#getting-started)
  - [å¦‚ä½•æ”¯æŒæœ¬é¡¹ç›®](#how-to-support-the-project)
  - [å®‰è£…](#installing)
  - [å¸¸è§é—®é¢˜](#common-issues)
- [å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹](#quick-start-guide)
  - [ç¤ºä¾‹ä»£ç åº“](https://github.com/davidteather/TikTok-Api/tree/main/examples)

<a name="documentation"></a>
## æ–‡æ¡£

å®Œæ•´æ–‡æ¡£è§ï¼š[æ–‡æ¡£ç«™ç‚¹](https://davidteather.github.io/TikTok-Api)

<a name="getting-started"></a>
## å¿«é€Ÿå¼€å§‹

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹ä½¿ç”¨æœ¬ APIã€‚

æ³¨æ„ï¼šå¦‚æœä½ æƒ³ç³»ç»Ÿå­¦ä¹ ç½‘é¡µçˆ¬è™«ï¼Œè¯·æŸ¥çœ‹æˆ‘å¼€æºå…è´¹çš„è¯¾ç¨‹ï¼š[Everything Web Scraping](https://github.com/davidteather/everything-web-scraping)

<a name="how-to-support-the-project"></a>
### å¦‚ä½•æ”¯æŒæœ¬é¡¹ç›®

- ç»™ä»“åº“ç‚¹ä¸ª Star ğŸ˜
- è€ƒè™‘åœ¨ GitHub ä¸Š[èµåŠ©](https://github.com/sponsors/davidteather)æˆ‘
- ç»™æˆ‘å‘é‚®ä»¶ï¼Œæˆ–åœ¨ [LinkedIn](https://www.linkedin.com/in/davidteather/) ä¸Šå‘Šè¯‰æˆ‘ä½ åœ¨ç”¨è¿™ä¸ª API åšä»€ä¹ˆâ€”â€”æˆ‘å¾ˆä¹æ„å¬åˆ°ä½ çš„æ•…äº‹
- ä¸º issue æäº¤ PR :)

<a name="installing"></a>
### å®‰è£…

æ³¨æ„ï¼šéœ€è¦ Python 3.9 åŠä»¥ä¸Šç‰ˆæœ¬

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å…ˆæŸ¥çœ‹ä»“åº“é‡Œçš„å·²å…³é—­ issueï¼›å¦‚æœä½ å‘ç°ä¹…è¿œçš„ issue ä¸ç°åœ¨çš„é—®é¢˜ç›¸åŒï¼Œä¹Ÿå¯ä»¥æ–°å¼€ä¸€ä¸ª issueã€‚è¯¥ä»£ç åº“ä¼šå—åˆ° TikTok æ›´æ–°çš„å½±å“ï¼Œæœ‰æ—¶éœ€è¦ä¸€äº›æ—¶é—´æ¥é€‚é…ã€‚

```sh
pip install TikTokApi
python -m playwright install
```

å¦‚æœä½ æ›´å–œæ¬¢è§†é¢‘è®²è§£ï¼Œå…³äºå®‰è£…ä¸è®¾ç½®å¯ä»¥çœ‹è¿™æ®µ [YouTube è§†é¢‘](https://www.youtube.com/watch?v=-uCt1x8kINQ)ï¼ˆç‰ˆæœ¬å¯èƒ½ç•¥æ—§ï¼Œä½†å®‰è£…æ­¥éª¤ç›¸åŒï¼‰ã€‚

å¦‚æœä½ æƒ³å¿«é€Ÿäº†è§£å¦‚ä½•åœ¨ Python ä¸­ç›‘å¬ [TikTok Live](https://www.youtube.com/watch?v=307ijmA3_lc) äº‹ä»¶ï¼Œä¹Ÿå¯ä»¥çœ‹è¿™æ®µçŸ­è§†é¢‘ã€‚

#### Docker å®‰è£…

å°†æœ¬ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼ˆæˆ–åªæ‹·è´ Dockerfileï¼Œå› ä¸ºå®ƒä¼šä» pip å®‰è£… TikTokApiï¼‰ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```sh
docker pull mcr.microsoft.com/playwright:focal
docker build . -t tiktokapi:latest
docker run -v TikTokApi --rm tiktokapi:latest python3 your_script.py
```

æ³¨æ„ï¼šä»¥ä¸Šç¤ºä¾‹å‡è®¾ä½ çš„è„šæœ¬åä¸º your_script.pyï¼Œä¸”ä½äºä»“åº“æ ¹ç›®å½•ã€‚

<a name="common-issues"></a>
### å¸¸è§é—®é¢˜

- ç©ºå“åº”å¼‚å¸¸ï¼ˆEmptyResponseExceptionï¼‰â€”â€”è¡¨ç¤º TikTok æ‹¦æˆªäº†è¯·æ±‚å¹¶æ£€æµ‹åˆ°ä½ æ˜¯æœºå™¨äººã€‚è¿™å¯èƒ½æ¥è‡ªä½ çš„ç¯å¢ƒè®¾ç½®æˆ–åº“æœ¬èº«
  - ä½ å¯èƒ½éœ€è¦ä»£ç†æ‰èƒ½ç¨³å®šæŠ“å– TikTokã€‚æˆ‘åšäº†ä¸€èŠ‚[ä»£ç†è¯¾ç¨‹](https://github.com/davidteather/everything-web-scraping/tree/main/002-proxies)ï¼Œè®²è§£ä½å®…ä»£ç†ä¸æ•°æ®ä¸­å¿ƒä»£ç†çš„åŒºåˆ«ç­‰å†…å®¹

- â€œBrowser has no attribute â€¦â€â€”â€”è¯·ç¡®è®¤å·²æ‰§è¡Œ `python3 -m playwright install`ã€‚è‹¥é—®é¢˜ä»åœ¨ï¼Œè¯·å‚è€ƒ [playwright-python](https://github.com/microsoft/playwright-python) çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

- â€œAPI æ–¹æ³•è¿”å›åç¨‹ï¼ˆCoroutineï¼‰â€â€”â€”åº“ä¸­å¾ˆå¤šæ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œè¯·ç¡®ä¿åœ¨ä½ çš„ç¨‹åºä¸­ä½¿ç”¨ `await` æ­£ç¡®è°ƒç”¨

<a name="quick-start-guide"></a>
## å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œç”¨äºè·å– TikTok ä¸Šæœ€æ–°çš„çƒ­é—¨è§†é¢‘ã€‚æ›´å¤šç¤ºä¾‹è§ [examples](https://github.com/davidteather/TikTok-Api/tree/main/examples) ç›®å½•ã€‚

æ³¨æ„ï¼šå¦‚æœä½ æƒ³å­¦ä¹ é€šè¿‡é€†å‘å·¥ç¨‹è¿›è¡Œç½‘é¡µæŠ“å–ï¼Œè¯·æŸ¥çœ‹æˆ‘å¼€æºå…è´¹çš„è¯¾ç¨‹ï¼š[Web Scraping with Reverse Engineering](https://github.com/davidteather/web-scraping-with-reverse-engineering)

```py
from TikTokApi import TikTokApi
import asyncio
import os

ms_token = os.environ.get("ms_token", None) # ä» tiktok.com çš„æµè§ˆå™¨ Cookie ä¸­è·å–ä½ çš„ ms_token

async def trending_videos():
    async with TikTokApi() as api:
        await api.create_sessions(ms_tokens=[ms_token], num_sessions=1, sleep_after=3, browser=os.getenv("TIKTOK_BROWSER", "chromium"))
        async for video in api.trending.videos(count=30):
            print(video)
            print(video.as_dict)

if __name__ == "__main__":
    asyncio.run(trending_videos())
```

åœ¨ä»“åº“æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ `-m` æ–¹å¼å¯ç›´æ¥è¿è¡Œç¤ºä¾‹è„šæœ¬ï¼š

```sh
python -m examples.trending_example
```

ä½ å¯ä»¥é€šè¿‡ `.as_dict` è®¿é—®å¯¹è±¡åˆ›å»ºæ—¶çš„å®Œæ•´æ•°æ®å­—å…¸ã€‚å¯¹äºè§†é¢‘å¯¹è±¡ï¼Œå¯èƒ½ç±»ä¼¼äº[è¿™ä¸ªç¤ºä¾‹](https://gist.github.com/davidteather/7c30780bbc30772ba11ec9e0b909e99d)ã€‚ç”±äº TikTok ä¼šä¸å®šæœŸè°ƒæ•´æ•°æ®ç»“æ„ï¼Œå»ºè®®åœ¨ä½¿ç”¨æ—¶å…ˆäº†è§£å­—å…¸ç»“æ„ã€‚
